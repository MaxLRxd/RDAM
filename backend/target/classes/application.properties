# ============================================================
# SISTEMA RDAM â€” application.properties
# ============================================================


# ------------------------------------------------------------
# SERVIDOR
# ------------------------------------------------------------
server.port=8080
server.servlet.context-path=/api/v1
server.base-url=${SERVER_BASE_URL:http://localhost:8080}


# ------------------------------------------------------------
# BASE DE DATOS
# ------------------------------------------------------------
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/rdam_db?useUnicode=true&characterEncoding=UTF-8&serverTimezone=America/Argentina/Buenos_Aires&allowPublicKeyRetrieval=true&useSSL=false}
spring.datasource.username=${DB_USERNAME:rdam_user}
spring.datasource.password=${DB_PASSWORD:rdam_pass_local}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000


# ------------------------------------------------------------
# JPA / HIBERNATE
# ------------------------------------------------------------
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true


# ------------------------------------------------------------
# FLYWAY
# ------------------------------------------------------------
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true


# ------------------------------------------------------------
# REDIS
# ------------------------------------------------------------
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms


# ------------------------------------------------------------
# MINIO
# ------------------------------------------------------------
minio.endpoint=${MINIO_ENDPOINT:http://localhost:9000}
minio.access-key=${MINIO_ACCESS_KEY:minioadmin}
minio.secret-key=${MINIO_SECRET_KEY:minioadmin123}
minio.bucket-name=${MINIO_BUCKET_NAME:rdam-certificados}


# ------------------------------------------------------------
# MAIL
# ------------------------------------------------------------
spring.mail.host=${SMTP_HOST:localhost}
spring.mail.port=${SMTP_PORT:1025}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${SMTP_STARTTLS:false}

rdam.mail.from=${MAIL_FROM:noreply@rdam.santafe.gob.ar}


# ------------------------------------------------------------
# JWT
# ------------------------------------------------------------
rdam.jwt.secret=${JWT_SECRET:desarrollo-local-2026-este-secret-es-solo-para-dev-rdam}
rdam.jwt.expiration-ms=28800000


# ------------------------------------------------------------
# PAGOS
# ------------------------------------------------------------
rdam.payment.mode=${PAYMENT_MODE:sim}
rdam.payment.hmac-secret=${PLUSPAGOS_HMAC_SECRET:dev-secret}
rdam.payment.merchant-guid=${PLUSPAGOS_MERCHANT_GUID:test-merchant-001}
rdam.payment.secret-key=${PLUSPAGOS_SECRET_KEY:clave-secreta-campus-2026}
rdam.payment.api-url=${PLUSPAGOS_API_URL:http://localhost:3000}
rdam.payment.sim-auto-approve=${SIM_AUTO_APPROVE:false}


# ------------------------------------------------------------
# REGLAS DE NEGOCIO
# ------------------------------------------------------------
rdam.negocio.vencimiento-pendiente-dias=${VENCIMIENTO_PENDIENTE_DIAS:1}
rdam.negocio.validez-certificado-dias=${VALIDEZ_CERTIFICADO_DIAS:2}
rdam.negocio.max-upload-size-bytes=10485760
rdam.negocio.monto-arancel=${MONTO_ARANCEL:1500.00}


# ------------------------------------------------------------
# UPLOAD
# ------------------------------------------------------------
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB


# ------------------------------------------------------------
# RATE LIMITING
# ------------------------------------------------------------
rdam.security.rate-limit-por-minuto=10


# ------------------------------------------------------------
# SCHEDULER
# ------------------------------------------------------------
rdam.scheduler.vencimiento-cron=0 0 2 * * *


# ------------------------------------------------------------
# LOGGING
# ------------------------------------------------------------
logging.level.root=INFO
logging.level.com.rdam.backend=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.flywaydb=INFO
logging.pattern.console=%d{HH:mm:ss} [%-5level] %logger{30} - %msg%n